{"version":3,"file":"common.js","sources":["../index.js"],"sourcesContent":["const clickEventType = () => {\r\n  return document.ontouchstart !== null ? \"click\" : \"touchstart\";\r\n};\r\n\r\nconst UNIQUE_ID = \"__vue_all_click_away__\";\r\n\r\nconst onMounted = (el, binding, vnode) => {\r\n  onUnmounted(el);\r\n\r\n  let vm = vnode.context;\r\n  let callback = binding.value;\r\n\r\n  let nextTick = false;\r\n  setTimeout(function () {\r\n    nextTick = true;\r\n  }, 0);\r\n\r\n  el[UNIQUE_ID] = (event) => {\r\n    if (\r\n      (!el || !el.contains(event.target)) &&\r\n      callback &&\r\n      nextTick &&\r\n      typeof callback === \"function\"\r\n    ) {\r\n      return callback.call(vm, event);\r\n    }\r\n  };\r\n\r\n  document.addEventListener(clickEventType(), el[UNIQUE_ID], false);\r\n  document.addEventListener(\"contextmenu\", el[UNIQUE_ID], false);\r\n};\r\n\r\nconst onUnmounted = (el) => {\r\n  document.removeEventListener(clickEventType(), el[UNIQUE_ID], false);\r\n  document.removeEventListener(\"contextmenu\", el[UNIQUE_ID], false);\r\n  delete el[UNIQUE_ID];\r\n};\r\n\r\nconst onUpdated = (el, binding, vnode) => {\r\n  if (binding.value === binding.oldValue) {\r\n    return;\r\n  }\r\n  onMounted(el, binding, vnode);\r\n};\r\n\r\nconst plugin = {\r\n  install: (app) => {\r\n    app.directive('all-click-away', directive)\r\n  }\r\n}\r\n\r\nconst directive = {\r\n  mounted: onMounted,\r\n  updated: onUpdated,\r\n  unmounted: onUnmounted,\r\n};\r\n\r\nconst mixin = {\r\n  directives: { AllClickAway: directive },\r\n};\r\n\r\nexport {\r\n  directive,\r\n  mixin\r\n}\r\n\r\nexport default plugin;\r\n"],"names":["clickEventType","document","ontouchstart","UNIQUE_ID","onMounted","el","binding","vnode","onUnmounted","vm","context","callback","value","nextTick","setTimeout","event","contains","target","call","addEventListener","removeEventListener","onUpdated","oldValue","plugin","install","app","directive","mounted","updated","unmounted","mixin","directives","AllClickAway"],"mappings":";;;;AAAA,MAAMA,cAAc,GAAG,YAAM;AAC3B,SAAOC,QAAQ,CAACC,YAAT,KAA0B,IAA1B,GAAiC,OAAjC,GAA2C,YAAlD;AACD,CAFD;;AAIA,MAAMC,SAAS,GAAG,wBAAlB;;AAEA,MAAMC,SAAS,GAAG,UAACC,EAAD,EAAKC,OAAL,EAAcC,KAAd,EAAwB;AACxCC,EAAAA,WAAW,CAACH,EAAD,CAAX;AAEA,MAAII,EAAE,GAAGF,KAAK,CAACG,OAAf;AACA,MAAIC,QAAQ,GAAGL,OAAO,CAACM,KAAvB;AAEA,MAAIC,QAAQ,GAAG,KAAf;AACAC,EAAAA,UAAU,CAAC,YAAY;AACrBD,IAAAA,QAAQ,GAAG,IAAX;AACD,GAFS,EAEP,CAFO,CAAV;;AAIAR,EAAAA,EAAE,CAACF,SAAD,CAAF,GAAgB,UAACY,KAAD,EAAW;AACzB,QACE,CAAC,CAACV,EAAD,IAAO,CAACA,EAAE,CAACW,QAAH,CAAYD,KAAK,CAACE,MAAlB,CAAT,KACAN,QADA,IAEAE,QAFA,IAGA,OAAOF,QAAP,KAAoB,UAJtB,EAKE;AACA,aAAOA,QAAQ,CAACO,IAAT,CAAcT,EAAd,EAAkBM,KAAlB,CAAP;AACD;AACF,GATD;;AAWAd,EAAAA,QAAQ,CAACkB,gBAAT,CAA0BnB,cAAc,EAAxC,EAA4CK,EAAE,CAACF,SAAD,CAA9C,EAA2D,KAA3D;AACAF,EAAAA,QAAQ,CAACkB,gBAAT,CAA0B,aAA1B,EAAyCd,EAAE,CAACF,SAAD,CAA3C,EAAwD,KAAxD;AACD,CAxBD;;AA0BA,MAAMK,WAAW,GAAG,UAACH,EAAD,EAAQ;AAC1BJ,EAAAA,QAAQ,CAACmB,mBAAT,CAA6BpB,cAAc,EAA3C,EAA+CK,EAAE,CAACF,SAAD,CAAjD,EAA8D,KAA9D;AACAF,EAAAA,QAAQ,CAACmB,mBAAT,CAA6B,aAA7B,EAA4Cf,EAAE,CAACF,SAAD,CAA9C,EAA2D,KAA3D;AACA,SAAOE,EAAE,CAACF,SAAD,CAAT;AACD,CAJD;;AAMA,MAAMkB,SAAS,GAAG,UAAChB,EAAD,EAAKC,OAAL,EAAcC,KAAd,EAAwB;AACxC,MAAID,OAAO,CAACM,KAAR,KAAkBN,OAAO,CAACgB,QAA9B,EAAwC;AACtC;AACD;;AACDlB,EAAAA,SAAS,CAACC,EAAD,EAAKC,OAAL,EAAcC,KAAd,CAAT;AACD,CALD;;MAOMgB,MAAM,GAAG;AACbC,EAAAA,OAAO,EAAE,UAACC,GAAD,EAAS;AAChBA,IAAAA,GAAG,CAACC,SAAJ,CAAc,gBAAd,EAAgCA,SAAhC;AACD;AAHY;MAMTA,SAAS,GAAG;AAChBC,EAAAA,OAAO,EAAEvB,SADO;AAEhBwB,EAAAA,OAAO,EAAEP,SAFO;AAGhBQ,EAAAA,SAAS,EAAErB;AAHK;MAMZsB,KAAK,GAAG;AACZC,EAAAA,UAAU,EAAE;AAAEC,IAAAA,YAAY,EAAEN;AAAhB;AADA;;;;;;"}